(this["webpackJsonpmy-working-hours"]=this["webpackJsonpmy-working-hours"]||[]).push([[0],{62:function(e,t,n){e.exports=n(84)},79:function(e,t,n){},80:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(6),s=n.n(o),i=n(32),c=n(25),u=n(14),l=n(15),d=n(17),m=n(16),p=n(18),h=n(22),f=n(43);n(72);f.initializeApp({apiKey:"AIzaSyD_Ng68vtXdquFcfMrcW76XBhboXErYrh8",databaseURL:"https://working-hours-52642.firebaseio.com/",projectId:"working-hours-52642"});var g=f.firestore(),b=n(115),k=n(114),v=n(34),E="user/LOGIN",O={isLogined:!1,userName:""};var w=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).login=function(e){e.preventDefault(),g.collection("users").doc(n.state.userName).get().then((function(e){e.exists?n.props.login(e.data().userId):console.log("not exist user")})).catch((function(e){console.error(e)}))},n.logout=function(e){n.props.logout()},n.handleNameChange=function(e){n.setState({userName:e.target.value})},n.state={userName:""},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return e.props.user.isLogined?r.a.createElement(b.a,{type:"button",onClick:e.logout},"LOGOUT"):r.a.createElement("form",{onSubmit:e.login},r.a.createElement(k.a,{id:"userName",name:"userName",onChange:e.handleNameChange,label:"\uc774\ub984"}),r.a.createElement(b.a,{type:"submit"},"LOGIN"))}}]),t}(r.a.Component),j=Object(h.b)((function(e){return{user:e}}),{login:function(e){return{type:E,user:e}},logout:function(e){return{type:"user/LOGOUT",user:e}}})(w),D=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"home"},r.a.createElement(j,null),r.a.createElement("div",null,r.a.createElement(i.b,{to:"work"},"\ucd9c\ud1f4\uadfc")),r.a.createElement("div",null,r.a.createElement(i.b,{to:"study"},"\uacf5\ubd80 \ud0c0\uc774\uba38")),r.a.createElement("div",null,r.a.createElement(i.b,{to:"logs"},"\uae30\ub85d\ud655\uc778")))}}]),t}(r.a.Component),C=Object(h.b)((function(e){return{user:e}}),{})(D),N=(n(79),function(e){return r.a.createElement("div",{id:"header",className:"header"},e.date)}),y=(n(80),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).formatDate=function(e){return"Invalid Date"===e.toString()?"-":e.getHours()+"\uc2dc "+e.getMinutes()+"\ubd84 "+e.getSeconds()+"\ucd08"},n.handleClickStartWork=function(){n.setState({start:n.formatDate(new Date)}),n.props.onClickStartTime(new Date)},n.handleClickEndWork=function(){n.setState({end:n.formatDate(new Date)}),n.props.onClickEndTime(new Date)},n.handleClickCompleteWork=function(){n.props.onClickComplete()},n.state={start:"-",end:"-"},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){this.props!==e&&this.setState(Object(v.a)({},this.state,{start:this.formatDate(new Date(1e3*this.props.startTime)),end:this.formatDate(new Date(1e3*this.props.endTime))}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Main"},r.a.createElement("div",{id:"start",className:"start_work"},this.state.start),r.a.createElement("div",{id:"end",className:"end_work"},this.state.end),r.a.createElement("div",{id:"buttonBox",className:"button_box"},r.a.createElement("button",{className:"work_btn default",onClick:this.handleClickStartWork},this.props.startWord),r.a.createElement("button",{className:"work_btn default",onClick:this.handleClickEndWork},this.props.endWord)),function(){if("-"!==e.state.start&&"-"!==e.state.end)return r.a.createElement("div",null,r.a.createElement("button",{className:"work_btn",onClick:e.handleClickCompleteWork},"complete"))}())}}]),t}(r.a.Component)),T=function(e){return r.a.createElement("div",{className:"App"},r.a.createElement(N,{date:function(){var e=new Date;return e.getFullYear()+"\ub144 "+(e.getMonth()+1)+"\uc6d4 "+e.getDate()+"\uc77c"}()}),r.a.createElement(y,{startWord:"\uc2dc\uc791",endWord:"\ub05d"}))},S=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).getDoc=function(){n.props.user.isLogined&&g.collection("users").doc(n.props.user.userName).collection("work").where("start",">=",n.getYesterday()).where("state","==",10).get().then((function(e){e.forEach((function(e){n.setState({id:e.id,startTime:e.data().start.seconds?e.data().start.seconds:"-",endTime:e.data().end.seconds?e.data().end.seconds:"-"})}))}))},n.getYesterday=function(){var e=new Date;return e.setHours(0,0,0,0),e.setDate(e.getDate()-1),e},n.getDate=function(){var e=new Date;return e.getFullYear()+"\ub144 "+(e.getMonth()+1)+"\uc6d4 "+e.getDate()+"\uc77c"},n.getDocDate=function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,a=e.getDate()<10?"0"+e.getDate():e.getDate();return t.toString().substring(2,4)+n+a},n.setStartTime=function(e){if(n.props.user.isLogined){var t=g.collection("users").doc(n.props.user.userName);n.state.id?t.collection("work").doc(n.state.id).set({state:10,start:e,end:{}}):t.collection("work").add({state:10,start:e,end:{}}).then((function(e){n.setState({id:e.id})}))}},n.setEndTime=function(e){if(n.props.user.isLogined){var t=g.collection("users").doc(n.props.user.userName);n.state.id?t.collection("work").doc(n.state.id).update({end:e}):alert("\ucd9c\uadfc\ubd80\ud130 \ud574\uc8fc\uc138\uc694.")}},n.setComplete=function(){n.props.user.isLogined&&(n.state.id&&g.collection("users").doc(n.props.user.userName).collection("work").doc(n.state.id).update({state:20}).then((function(e){console.log(e)})))},n.state={id:null,startTime:"-",endTime:"-"},n.getDoc(),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(N,{date:this.getDate()}),r.a.createElement(y,{startWord:"\ucd9c\uadfc",endWord:"\ud1f4\uadfc",startTime:this.state.startTime,endTime:this.state.endTime,onClickStartTime:this.setStartTime,onClickEndTime:this.setEndTime,onClickComplete:this.setComplete}))}}]),t}(r.a.Component),W=Object(h.b)((function(e){return{user:e}}),{})(S),L=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"log page")}}]),t}(r.a.Component),M=n(56),I=function(e){var t=e.store,n=e.persistor;return r.a.createElement(h.a,{store:t},r.a.createElement(M.a,{loading:null,persistor:n},r.a.createElement(i.a,{basename:"/working-hours"},r.a.createElement(c.a,{exact:!0,path:"/",component:C}),r.a.createElement(c.a,{path:"/work",component:W}),r.a.createElement(c.a,{path:"/study",component:T}),r.a.createElement(c.a,{path:"/logs",component:L}))))},_=n(21),x=n(46),Y=n(57),G=n.n(Y);n(83),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U={key:"root",storage:G.a},A=Object(x.a)(U,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(v.a)({},e,{isLogined:!0,userName:t.user});case"user/LOGOUT":return Object(v.a)({},e,{isLogined:!1,userName:t.user});default:return e}})),B=Object(_.c)(A),F=Object(x.b)(B);s.a.render(r.a.createElement(I,{store:B,persistor:F}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[62,1,2]]]);
//# sourceMappingURL=main.9cedd8c5.chunk.js.map